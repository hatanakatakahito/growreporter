# GrowReporter 詳細仕様書

## 1. アプリケーション概要

**GrowReporter**は、Base44プラットフォーム上で構築された包括的なウェブサイト分析・改善管理システムです。Google Analytics 4（GA4）とGoogle Search Console（GSC）のデータを統合し、AIを活用した分析と改善提案を提供するWebアプリケーションです。

## 2. 技術スタック

### 2.1 フロントエンド
- **React 18.2.0**: メインのUIフレームワーク
- **Vite 6.1.0**: ビルドツールと開発サーバー
- **React Router DOM 7.2.0**: ルーティング管理
- **TanStack Query**: データフェッチングとキャッシュ管理
- **Tailwind CSS 3.4.17**: スタイリング
- **Radix UI**: アクセシブルなUIコンポーネント
- **Recharts 2.15.1**: データ可視化
- **Framer Motion 12.4.7**: アニメーション
- **React Hook Form 7.54.2**: フォーム管理

### 2.2 バックエンド・インフラ
- **Base44 SDK**: バックエンドサービスとデータベース
- **OAuth認証**: Google Analytics 4、Google Search Console連携
- **AI統合**: Core.InvokeLLM機能による分析生成

### 2.3 開発ツール
- **ESLint**: コード品質管理
- **TypeScript**: 型安全性（部分的）
- **PostCSS**: CSS処理
- **Autoprefixer**: ブラウザ互換性

## 3. 主要機能

### 3.1 ダッシュボード機能
- **サイト選択**: 複数サイトの管理と切り替え
- **期間選択**: カレンダーによる柔軟な期間設定
- **主要指標表示**: セッション、PV、エンゲージメント率、コンバージョン率
- **KPI管理**: 目標設定と達成率の可視化
- **クイックアクション**: 主要機能への直接アクセス

### 3.2 分析機能

#### 3.2.1 全体サマリー
- **主要指標サマリ**: 6つの重要指標の表示
- **コンバージョン内訳**: 設定されたイベント別の分析
- **13ヶ月推移**: 月別データの表形式・グラフ表示
- **AI分析**: 自動生成される分析レポート

#### 3.2.2 時系列分析
- **日別分析**: 日単位での詳細なデータ表示
- **曜日別分析**: 曜日パターンの分析
- **時間帯別分析**: 時間帯ごとのアクセス傾向

#### 3.2.3 集客分析
- **集客チャネル**: トラフィックソース別の分析
- **キーワード分析**: 検索流入キーワードの分析
- **被リンク元**: リファラルサイトの分析

#### 3.2.4 エンゲージメント分析
- **ページ別分析**: 個別ページのパフォーマンス
- **ページ分類別**: カテゴリ別の分析
- **ランディングページ**: 入口ページの分析
- **ファイルダウンロード**: ダウンロード行動の追跡
- **外部リンククリック**: 外部リンクのクリック分析

#### 3.2.5 コンバージョン分析
- **コンバージョン一覧**: 設定されたイベントの詳細
- **逆算フロー**: コンバージョンまでの経路分析

#### 3.2.6 SEO分析
- **Search Console連携**: 検索パフォーマンスの分析

### 3.3 改善管理機能

#### 3.3.1 改善課題管理
- **カンバンボード**: 起案・対応中・完了の3段階管理
- **ドラッグ&ドロップ**: 直感的なステータス変更
- **カテゴリ分類**: 集客・コンテンツ・デザイン・機能・その他
- **優先度設定**: 高・中・低の優先度管理

#### 3.3.2 AI改善案生成
- **自動生成**: サイトデータに基づく改善提案
- **手動追加**: ユーザーによる改善課題の追加
- **評価機能**: 完了後の効果測定

### 3.4 サイト管理機能

#### 3.4.1 サイト設定（5ステップ）
1. **サイト情報**: 基本情報の入力
2. **GA4連携**: Google Analytics 4のOAuth認証
3. **GSC連携**: Google Search ConsoleのOAuth認証
4. **コンバージョン設定**: イベントの定義（任意）
5. **KPI設定**: 目標値の設定（任意）

#### 3.4.2 サイト一覧
- **複数サイト管理**: 複数サイトの登録・切り替え
- **設定状況表示**: 各サイトの設定完了状況

### 3.5 レポート機能
- **評価レポート**: 改善施策の効果測定
- **PDF/Excel出力**: レポートのエクスポート機能

## 4. データ構造

### 4.1 主要エンティティ

#### 4.1.1 Site（サイト）
```javascript
{
  id: string,
  site_name: string,
  site_url: string,
  site_type: string,
  business_type: string,
  meta_title: string,
  meta_description: string,
  pc_screenshot_url: string,
  mobile_screenshot_url: string,
  ga4_property_id: string,
  ga4_property_name: string,
  gsc_site_url: string,
  conversion_events: Array<{
    event_name: string,
    display_name: string
  }>,
  kpi_settings: {
    target_sessions: number,
    target_users: number,
    target_conversions: number,
    target_conversion_rate: number,
    kpi_list: Array<{
      metric: string,
      label: string,
      target: number
    }>
  },
  setup_step: number,
  setup_completed: boolean,
  created_by: string
}
```

#### 4.1.2 Improvement（改善課題）
```javascript
{
  id: string,
  site_id: string,
  title: string,
  description: string,
  category: 'acquisition' | 'content' | 'design' | 'feature' | 'other',
  priority: 'high' | 'medium' | 'low',
  status: 'draft' | 'in_progress' | 'completed',
  expected_impact: string,
  completed_at: string,
  evaluation_data: object
}
```

#### 4.1.3 OAuthToken（認証トークン）
```javascript
{
  id: string,
  created_by: string,
  provider: 'google_analytics' | 'google_search_console',
  access_token: string,
  refresh_token: string,
  expires_at: string
}
```

### 4.2 データフロー

#### 4.2.1 GA4データ取得
1. OAuthトークンの取得・更新
2. GA4 Reporting APIの呼び出し
3. メトリクスデータの処理・整形
4. フロントエンドでの表示

#### 4.2.2 AI分析フロー
1. 分析データの収集
2. プロンプトの生成
3. Base44 Core.InvokeLLMの呼び出し
4. Markdown形式での結果表示

## 5. UI/UX設計

### 5.1 デザインシステム
- **カラーパレット**: ブルー系を基調としたプロフェッショナルなデザイン
- **タイポグラフィ**: 読みやすいフォントサイズと行間
- **レスポンシブ**: モバイル・タブレット・デスクトップ対応
- **アクセシビリティ**: Radix UIによる標準準拠

### 5.2 ナビゲーション
- **サイドバー**: 階層的なメニュー構造
- **ブレッドクラム**: 現在位置の明確化
- **クイックアクション**: 主要機能への直接アクセス

### 5.3 データ可視化
- **カード形式**: 指標の分かりやすい表示
- **グラフ**: Rechartsによるインタラクティブなチャート
- **テーブル**: ソート・フィルタ機能付き
- **プログレスバー**: KPI達成率の視覚化

## 6. セキュリティ・認証

### 6.1 認証システム
- **Base44認証**: 統一された認証システム
- **OAuth 2.0**: Googleサービスとの安全な連携
- **トークン管理**: 自動更新機能付きアクセストークン

### 6.2 データ保護
- **データ分離**: ユーザー別のデータアクセス制御
- **暗号化**: 機密データの暗号化保存
- **監査ログ**: アクセス履歴の記録

## 7. パフォーマンス最適化

### 7.1 フロントエンド最適化
- **コード分割**: ページ単位での遅延読み込み
- **キャッシュ戦略**: TanStack Queryによる効率的なデータキャッシュ
- **バンドル最適化**: Viteによる高速ビルド

### 7.2 データ取得最適化
- **並列処理**: 複数APIの同時呼び出し
- **エラーハンドリング**: 適切なエラー表示とリトライ機能
- **ローディング状態**: ユーザーフレンドリーなローディング表示

## 8. 国際化・多言語対応

### 8.1 現在の対応
- **日本語**: 完全対応
- **日付フォーマット**: 日本の標準に準拠
- **数値フォーマット**: 日本の数値表示形式

### 8.2 将来の拡張
- **多言語対応**: 英語・その他言語への拡張
- **地域設定**: タイムゾーン・通貨の対応

## 9. 運用・保守

### 9.1 監視・ログ
- **エラートラッキング**: フロントエンドエラーの監視
- **パフォーマンス監視**: レスポンス時間の追跡
- **ユーザー行動分析**: 機能利用状況の把握

### 9.2 バックアップ・復旧
- **データバックアップ**: 定期的なデータバックアップ
- **災害復旧**: システム障害時の復旧手順

## 10. 今後の拡張予定

### 10.1 機能拡張
- **リアルタイム分析**: WebSocketによるリアルタイムデータ更新
- **カスタムダッシュボード**: ユーザー定義のダッシュボード
- **アラート機能**: 異常値検知と通知
- **API提供**: 外部システムとの連携

### 10.2 技術改善
- **TypeScript完全移行**: 型安全性の向上
- **テスト自動化**: 単体・統合テストの充実
- **CI/CD**: 自動デプロイメントの構築
- **マイクロサービス化**: スケーラビリティの向上

## 11. まとめ

GrowReporterは、現代的なWeb技術スタックを活用した包括的なウェブサイト分析・改善管理システムです。GA4とGSCのデータを統合し、AIを活用した分析機能により、ユーザーがデータドリブンな意思決定を行えるよう支援します。

特に、改善課題の管理機能とAI分析機能により、単なる分析ツールを超えて、実際のビジネス改善に直結する価値を提供することを目指しています。

技術的には、React + Vite + Base44の組み合わせにより、高速でスケーラブルなアプリケーションを実現し、ユーザーエクスペリエンスの向上と開発効率の両立を図っています。


